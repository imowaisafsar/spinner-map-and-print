<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://printjs-4de6.kxcdn.com/print.min.css">
    <link rel="stylesheet" href="./style.css">
    <title>Home</title>
</head>

<body>
    <div class="container" id="container">
        <div class="wheel_ten circle_common">
            <ul class="number_list number_list-10">
                <li id="l10_p9">9</li>
                <li id="l10_p8">8</li>
                <li id="l10_p7">7</li>
                <li id="l10_p6">6</li>
                <li id="l10_p5">5</li>
                <li id="l10_p4">4</li>
                <li id="l10_p3">3</li>
                <li id="l10_p2">2</li>
                <li id="l10_p1">1</li>
            </ul>
            <div class="wheel_nine circle_common">
                <ul class="number_list number_list-9">
                    <li id="l9_p9">9</li>
                    <li id="l9_p8">8</li>
                    <li id="l9_p7">7</li>
                    <li id="l9_p6">6</li>
                    <li id="l9_p5">5</li>
                    <li id="l9_p4">4</li>
                    <li id="l9_p3">3</li>
                    <li id="l9_p2">2</li>
                    <li id="l9_p1">1</li>
                </ul>
                <div class="wheel_eight circle_common">
                    <ul class="number_list number_list-8">
                        <li id="l8_p9">9</li>
                        <li id="l8_p8">8</li>
                        <li id="l8_p7">7</li>
                        <li id="l8_p6">6</li>
                        <li id="l8_p5">5</li>
                        <li id="l8_p4">4</li>
                        <li id="l8_p3">3</li>
                        <li id="l8_p2">2</li>
                        <li id="l8_p1">1</li>
                    </ul>
                    <div class="wheel_seven circle_common">
                        <ul class="number_list number_list-7">
                            <li id="l7_p9">9</li>
                            <li id="l7_p8">8</li>
                            <li id="l7_p7">7</li>
                            <li id="l7_p6">6</li>
                            <li id="l7_p5">5</li>
                            <li id="l7_p4">4</li>
                            <li id="l7_p3">3</li>
                            <li id="l7_p2">2</li>
                            <li id="l7_p1">1</li>
                        </ul>
                        <div class="wheel_six circle_common">
                            <ul class="number_list number_list-6">
                                <li id="l6_p9">9</li>
                                <li id="l6_p8">8</li>
                                <li id="l6_p7">7</li>
                                <li id="l6_p6">6</li>
                                <li id="l6_p5">5</li>
                                <li id="l6_p4">4</li>
                                <li id="l6_p3">3</li>
                                <li id="l6_p2">2</li>
                                <li id="l6_p1">1</li>
                            </ul>
                            <div class="wheel_five circle_common">
                                <ul class="number_list number_list-5">
                                    <li id="l5_p9">9</li>
                                    <li id="l5_p8">8</li>
                                    <li id="l5_p7">7</li>
                                    <li id="l5_p6">6</li>
                                    <li id="l5_p5">5</li>
                                    <li id="l5_p4">4</li>
                                    <li id="l5_p3">3</li>
                                    <li id="l5_p2">2</li>
                                    <li id="l5_p1">1</li>
                                </ul>
                                <div class="wheel_four circle_common">
                                    <ul class="number_list number_list-4">
                                        <li id="l4_p9">9</li>
                                        <li id="l4_p8">8</li>
                                        <li id="l4_p7">7</li>
                                        <li id="l4_p6">6</li>
                                        <li id="l4_p5">5</li>
                                        <li id="l4_p4">4</li>
                                        <li id="l4_p3">3</li>
                                        <li id="l4_p2">2</li>
                                        <li id="l4_p1">1</li>
                                    </ul>
                                    <div class="wheel_three circle_common">
                                        <ul class="number_list number_list-3">
                                            <li id="l3_p9">9</li>
                                            <li id="l3_p8">8</li>
                                            <li id="l3_p7">7</li>
                                            <li id="l3_p6">6</li>
                                            <li id="l3_p5">5</li>
                                            <li id="l3_p4">4</li>
                                            <li id="l3_p3">3</li>
                                            <li id="l3_p2">2</li>
                                            <li id="l3_p1">1</li>
                                        </ul>
                                        <div class="wheel_two circle_common">
                                            <ul class="number_list number_list-2">
                                                <li id="l2_p9">9</li>
                                                <li id="l2_p8">8</li>
                                                <li id="l2_p7">7</li>
                                                <li id="l2_p6">6</li>
                                                <li id="l2_p5">5</li>
                                                <li id="l2_p4">4</li>
                                                <li id="l2_p3">3</li>
                                                <li id="l2_p2">2</li>
                                                <li id="l2_p1">1</li>
                                            </ul>
                                            <div class="wheel_one circle_common">
                                                <ul class="number_list number_list-1">
                                                    <li id="l1_p9">9</li>
                                                    <li id="l1_p8">8</li>
                                                    <li id="l1_p7">7</li>
                                                    <li id="l1_p6">6</li>
                                                    <li id="l1_p5">5</li>
                                                    <li id="l1_p4">4</li>
                                                    <li id="l1_p3">3</li>
                                                    <li id="l1_p2">2</li>
                                                    <li id="l1_p1">1</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <svg id="svg">
            <line id="line" class="line original" stroke-array="5, 5" />
        </svg>

    </div>

    <div style="display: block;">
        <button type="button" id="connect" class="btn btn-secondary">CONNECT</button>
        <button type="button" id="printPDF" class="btn">PRINT</button>
    </div>

    <div style="display: none;">
        <div id="output"></div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
        integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://printjs-4de6.kxcdn.com/print.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <script>
        $("ul.number_list > li").click(function () {
            if (!$(this).hasClass('active_point')) {
                $(this).addClass('active_point')
            } else {
                $(this).removeClass('active_point')
            }
        })

        const config = {
            target: undefined,
            line: $(".line"),
            delay: 40 // enter zero for live resizing
        }
        const drawBetweenObjects = {
            //cmake the line
            makeLine: function (line, startPoint, endPoint) {
                //debugger
                var className = startPoint.attr('id') + endPoint.attr('id');
                if (className.includes("undefined") !== true) { //error check
                    $(line).clone().addClass('deleteMe').addClass(className).removeClass("original").insertAfter(line);
                    //calculations (for legibility, these are separte vars)
                    var x1 = startPoint.offset().left + (startPoint.width() / 2);
                    var y1 = startPoint.offset().top + (startPoint.height() / 2);
                    var x2 = endPoint.offset().left + (endPoint.width() / 2);
                    var y2 = endPoint.offset().top + (endPoint.height() / 2);
                    $("." + className).attr('x1', x1).attr('y1', y1).attr('x2', x2).attr('y2', y2); //svg attributes
                } else { console.error("undefined object") }
            },
            findLines: function (search) {
                $(".deleteMe").remove(); //remove last set of lines
                let count = 1, first, last;
                $(search).each(function (index, el) {
                    if (search.eq(index + 1).length) { //only do drawBetweenObject if there is another.
                        (count === 1 ? first = $(this) : ''), count++;
                        last = search.eq(index + 1);
                        drawBetweenObjects.makeLine(config.line, $(this), search.eq(index + 1));   //args order - line, div1 and div2 - the next div.
                    }
                });
                drawBetweenObjects.makeLine(config.line, first, last);
            }
        }

        $("button#connect").click(function () {
            config.target = $(".active_point");
            console.log(config.target)
            drawBetweenObjects.findLines(config.target);
        })
        $("button#printPDF").click(function () {
            printFn();
        })
        async function printFn() {
            let div = document.getElementById('container');
            $('#output').empty();
            await html2canvas(div).then(
                function (canvas) {
                    document
                        .getElementById('output')
                        .appendChild(canvas);
                });
            await printJS({
                printable: 'output',
                type: 'html'
            })
        }
    </script>
</body>

</html>